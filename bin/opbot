#!/usr/bin/env python3
# OPBOT - Object Programming Bot (bin/opbot)
#
# this file is placed in the public domain

import readline

from op.csl import Console, console
from op.run import Basic, cfg, os, parse_cli

def main():
    cfg.verbose = True
    cfg.wd = os.path.expanduser("~/.opbot")
    parse_cli()
    h = Basic()
    h.walk("opmod")
    h.walk("opbot")
    if cfg.txt:
        return h.cmd(cfg.otxt)
    if cfg.op("s"):
        c = Console()
        c.clone(h)
        c.init(cfg.mods)
        c.start()
        c.wait()
 
console(main)

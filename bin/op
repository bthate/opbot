#!/usr/bin/env python3
# This file is placed in the Public Domain.

import os, readline

from op.bsc import Basic
from op.csl import console
from op.run import cfg, parse_cli

wd = os.path.expanduser("~/.opbot")

def main():
    cfg.wd = wd
    cfg.md = os.path.join(os.getcwd() , "mod")
    parse_cli()
    h = Basic()
    h.fromdir(cfg.md)
    h.walk("op")
    h.walk("mod")
    return h.cmd(cfg.otxt)

console(main)
